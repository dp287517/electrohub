@tailwind base;
@tailwind components;
@tailwind utilities;

:root { color-scheme: light dark; }
body { @apply bg-gray-50 text-gray-900; }
.container-narrow { @apply max-w-5xl mx-auto px-4; }
.card { @apply bg-white rounded-2xl shadow-soft border border-gray-100; }
.btn { @apply inline-flex items-center justify-center rounded-xl px-4 py-2 font-medium transition; }
.btn-primary { @apply btn bg-brand-600 text-white hover:bg-brand-700; }
.input { @apply w-full rounded-xl border border-gray-200 bg-white px-4 py-2 outline-none focus:ring-4 focus:ring-brand-100 focus:border-brand-400; }
.label { @apply text-sm font-medium text-gray-700; }

/* Animations */
@keyframes fadeIn {
  from { opacity: 0; transform: translateY(10px); }
  to { opacity: 1; transform: translateY(0); }
}
.animate-fadeIn {
  animation: fadeIn 0.3s ease-out forwards;
}

/* Line clamp utility */
.line-clamp-2 {
  display: -webkit-box;
  -webkit-line-clamp: 2;
  -webkit-box-orient: vertical;
  overflow: hidden;
}

/* iOS Safe Area Support */
.safe-area-top {
  padding-top: env(safe-area-inset-top, 0px);
}

.safe-area-header {
  padding-top: env(safe-area-inset-top, 0px);
}

/* For elements that need to account for header + safe area */
.below-safe-header {
  top: calc(4rem + env(safe-area-inset-top, 0px));
}

/* iOS PWA Performance Optimizations */
@supports (-webkit-touch-callout: none) {
  /* iOS-specific optimizations */

  /* Disable backdrop-blur on iOS standalone mode for better performance */
  @media (display-mode: standalone) {
    .ios-pwa-no-blur {
      backdrop-filter: none !important;
      -webkit-backdrop-filter: none !important;
    }
  }

  /* Force GPU acceleration for smoother animations */
  .modal-content,
  .animate-slideUp,
  .animate-fadeIn {
    transform: translateZ(0);
    -webkit-transform: translateZ(0);
    backface-visibility: hidden;
    -webkit-backface-visibility: hidden;
  }

  /* Optimize touch interactions */
  button, a, [role="button"] {
    -webkit-tap-highlight-color: transparent;
  }
}

/* Prevent overscroll bounce on iOS modals */
.modal-overlay {
  overscroll-behavior: contain;
  -webkit-overflow-scrolling: auto;
}

/* Improve touch responsiveness */
.touch-manipulation {
  touch-action: manipulation;
}

/* Reduce motion for users who prefer it */
@media (prefers-reduced-motion: reduce) {
  *, *::before, *::after {
    animation-duration: 0.01ms !important;
    animation-iteration-count: 1 !important;
    transition-duration: 0.01ms !important;
  }
}
